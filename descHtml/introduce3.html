<div>
	<canvas style="display: block; margin: auto; border-style: solid; background-color: #747474;" id="introduce3"></canvas>
</div>

<script type="text/javascript">
	(function(){
		var c = document.getElementById("introduce3");
		var c_ctx = c.getContext('2d');

		c.width = document.getElementById("descHtml").offsetWidth;
		c.height = canvas.offsetHeight;	


		// 버튼들
	    c.statusBtn = new Drawable(c, '/resource/img/profile2_statusBtn.png');
	    c.statusBtn.setTouchEvent(function(){
	    	c.charImg = new Drawable(c, '/resource/img/charImg.png');
		    c.charImg.setPosition(15, 15);
		    c.charImg.setParent(c.descriptBg);

		    c.careerImg = new Drawable(c, '/resource/img/careerImg.png');
		    c.careerImg.setPosition(15, 85);
		    c.careerImg.setParent(c.descriptBg);

		    c.featureImg = new Drawable(c, '/resource/img/featureImg.png');
		    c.featureImg.setPosition(15, 150);
		    c.featureImg.setParent(c.descriptBg);
	    });

	    c.skillBtn = new Drawable(c, '/resource/img/profile2_skillBtn.png');
		c.skillBtn.setTouchEvent(function(){
	    	
	    })
	    c.inventoryBtn = new Drawable(c, '/resource/img/profile2_inventoryBtn.png');
	    c.passiveBtn = new Drawable(c, '/resource/img/profile2_passiveBtn.png');

	    // 타이틀 이미지
	    c.titleImg = new Drawable(c, '/resource/img/profile2_title.png');
	    // 캐릭터 이미지
	    c.characterImg = new Drawable(c, '/resource/img/profile2_0.png');
	    // 설명란 이미지
	    c.descriptBg = new Drawable(c, '/resource/img/profile2_1.png');


	    var removeHasParentElem = function(){
	    	var removeCount = 0;

	    	for(var i = 0 ; i < c.drawables.length ; ++i)
    		{
    			if(c.drawables[i].parent)
    			{
    				c.drawables[i] = null;
    				++removeCount;
    			}
    		}

    		for(var i = 0 ; i < c.drawables.length ; ++i)
    		{
    			if(c.drawables[i] == null && c.drawables.length > i + 1)
    			{
    				c.drawables[i] = c.drawables[i+1];
    				c.drawables[i+1] = null;
    			}
    		}

    		c.drawables = c.drawables.slice(0, c.drawables.length - removeCount);
	    }
	    var recalcPosition = function(){
	    	var margin = 15;
	    	var btnSize = c.statusBtn.getSize();

			c.statusBtn.setPosition(margin, margin);
			c.skillBtn.setPosition(margin * 2 + btnSize.width,
									margin);
			c.inventoryBtn.setPosition(margin,
									margin * 2 + btnSize.height);
			c.passiveBtn.setPosition(margin * 2 + btnSize.width,
			 						margin * 2 + btnSize.height);

			c.titleImg.setPosition(margin, margin * 3 + btnSize.height * 2);

			var charSize = c.characterImg.getSize();
			var descSize = c.descriptBg.getSize();
			
			var char_x = margin * 3 + btnSize.width * 2;
			var char_y = margin;

			var descript_x = char_x + charSize.width + 20;
			var descript_y = margin;

			var height = canvas.offsetHeight;

			if(c.width < descript_x + descSize.width){
				descript_x = margin;
				descript_y = 250;

				char_y = descript_y - charSize.height / 2;

				height += descSize.height;
			}

			if(c.width < char_x + charSize.width){
				char_x = margin;
				char_y = 250;

				descript_y += charSize.height + margin;

				height += charSize.height;
			}

			c.characterImg.setPosition(char_x, char_y);
			c.descriptBg.setPosition(descript_x, descript_y);

			if(c.height != height)
			{
				c.height = height;
			}
	    }
 
	    setUpdateFunc(function(){
			if(c.width != document.getElementById("descHtml").offsetWidth)
			{
				c.width = document.getElementById("descHtml").offsetWidth;
			}

			c_ctx.clearRect(0, 0, c.width, c.height);

			recalcPosition();

			for(var i = 0 ; i < c.drawables.length ; ++i)
			{
				c.drawables[i].draw();
			}
		});

		c.addEventListener("mouseup", function (e) {
    		var pos = getMouseTouchPos(c, e);

    		for(var i = 0 ; i < c.drawables.length ; ++i)
    		{
    			if(c.drawables[i].isTouched(pos))
    			{
    				if(c.drawables[i].hasTouchEvent())
    				{
    					if(c.drawables[i].parent == null)
    					{
							removeHasParentElem();
						}
    				}

    				c.drawables[i].runTouchEvent();
    			}
    		}

		}, false);
	})();
</script>